# Git 工作流程说明

## 分支策略

### main 分支
- **用途**：生产环境代码，稳定版本
- **保护**：只接受来自 `dev` 分支的合并请求
- **操作**：需要代码审查后才能合并

### dev 分支
- **用途**：日常开发分支，用于功能开发和bug修复
- **操作**：所有日常开发都在此分支进行
- **合并**：开发完成后，通过 Pull Request 合并到 `main` 分支

## 日常开发流程

### 1. 开始开发
```bash
# 确保在 dev 分支
git checkout dev

# 拉取最新代码
git pull origin dev
```

### 2. 创建功能分支（可选，推荐）
```bash
# 创建功能分支
git checkout -b feature/功能名称

# 或者修复bug
git checkout -b fix/bug描述
```

### 3. 开发并提交
```bash
# 添加更改
git add .

# 提交更改
git commit -m "feat: 功能描述"

# 推送到远程 dev 分支
git push origin dev
```

### 4. 合并到 main 分支

当功能开发完成并测试通过后：

#### 方法一：通过 GitHub Pull Request（推荐）
1. 在 GitHub 上创建 Pull Request：`dev` → `main`
2. 填写 PR 描述，说明更改内容
3. 等待代码审查
4. 审查通过后合并到 `main`

#### 方法二：本地合并（需要权限）
```bash
# 切换到 main 分支
git checkout main

# 拉取最新代码
git pull origin main

# 合并 dev 分支
git merge dev

# 推送到远程
git push origin main

# 切换回 dev 分支继续开发
git checkout dev
```

## 提交信息规范

使用约定式提交（Conventional Commits）：

- `feat:` - 新功能
- `fix:` - 修复bug
- `docs:` - 文档更新
- `style:` - 代码格式调整（不影响功能）
- `refactor:` - 代码重构
- `test:` - 测试相关
- `chore:` - 构建/工具链相关

示例：
```
feat: 添加用户登录功能
fix: 修复房间列表加载失败的问题
docs: 更新README文档
refactor: 重构游戏状态管理逻辑
```

## 注意事项

1. **不要直接在 main 分支开发**
   - 所有开发都在 `dev` 分支进行
   - `main` 分支只接受来自 `dev` 的合并

2. **定期同步代码**
   ```bash
   # 在 dev 分支
   git pull origin dev
   ```

3. **保持提交信息清晰**
   - 使用有意义的提交信息
   - 一次提交只做一件事

4. **合并前检查**
   - 确保代码可以正常编译
   - 确保没有明显的bug
   - 更新相关文档

## 当前分支状态

- **当前工作分支**：`dev`
- **主分支**：`main`
- **远程仓库**：`origin`

## 快速命令参考

```bash
# 查看当前分支
git branch

# 查看所有分支
git branch -a

# 切换到 dev 分支
git checkout dev

# 查看状态
git status

# 查看提交历史
git log --oneline

# 查看 dev 和 main 的差异
git diff main..dev
```
