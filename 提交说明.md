# Git提交说明

## 确保中文Commit不乱码的配置

项目已配置以下Git设置，确保中文commit信息不会乱码：

```bash
git config --global core.quotepath false
git config --global i18n.commitencoding utf-8
git config --global i18n.logoutputencoding utf-8
```

## 提交步骤

### 方法一：使用commit模板（推荐）

1. **添加文件到暂存区**
   ```bash
   git add .
   # 或指定文件
   git add <文件路径>
   ```

2. **提交（会打开编辑器，使用UTF-8编码的模板）**
   ```bash
   git commit
   ```
   编辑器会自动打开，显示commit模板，填写commit信息后保存关闭即可。

3. **手动推送到远程**
   ```bash
   git push origin main
   ```

### 方法二：使用文件方式提交（最可靠）

如果直接使用 `git commit -m "中文信息"` 在PowerShell中可能乱码，可以使用文件方式：

1. **创建commit信息文件**
   ```bash
   # 创建UTF-8编码的commit信息文件
   echo "你的commit信息" > commit-msg.txt
   ```

2. **从文件读取commit信息**
   ```bash
   git commit -F commit-msg.txt
   # 或修改最近一次commit
   git commit --amend -F commit-msg.txt
   ```

3. **删除临时文件**
   ```bash
   rm commit-msg.txt
   ```

### 方法三：使用多行commit信息

```bash
git commit -m "第一行简短描述" -m "详细说明第一点" -m "详细说明第二点"
```

## Commit信息规范

### 格式
```
<类型>: <简短描述>

<详细说明（可选）>
```

### 类型
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建/工具/依赖更新

### 示例

**好的commit信息：**
```
feat: 添加GTO建议功能

- 实现GTO API调用接口
- 添加策略建议展示组件
- 优化建议加载性能
```

**不好的commit信息：**
```
update
fix bug
修改
```

## 验证Commit信息

提交后可以验证commit信息是否正确：

```bash
# 查看最近一次commit
git log -1

# 查看commit详细信息
git show HEAD

# 如果显示正常，说明编码正确
```

## 注意事项

1. **不要使用PowerShell直接输入中文commit信息**，可能会乱码
2. **推荐使用commit模板**（`git commit`），会自动打开编辑器
3. **如果必须使用命令行**，使用 `-F` 参数从文件读取
4. **提交后不要立即push**，先验证commit信息是否正确
5. **手动执行push**，确保有足够时间检查

## 修复乱码的Commit

如果已经提交了乱码的commit，可以使用以下方法修复：

```bash
# 修改最近一次commit
git commit --amend -F commit-msg.txt
git push --force-with-lease origin main

# 修改多个commit（需要交互式rebase）
git rebase -i HEAD~n  # n是要修改的commit数量
```
