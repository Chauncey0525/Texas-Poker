<!--components/player-list/player-list.wxml-->
<view class="player-list-container {{layout}}">
  <block wx:if="{{layout === 'circle'}}">
    <view class="players-circle">
      <view 
        class="player-seat {{item.id === myPlayerIndex ? 'my-seat' : ''}} {{currentPlayerIndex === item.id ? 'active-turn' : ''}}"
        wx:for="{{players}}"
        wx:key="id"
        data-index="{{item.id}}"
        bindtap="onPlayerTap"
        style="transform: rotate({{360 / players.length * item.id}}deg) translateY(-200rpx) rotate({{-360 / players.length * item.id}}deg);"
      >
        <view class="player-avatar">{{item.name.charAt(0)}}</view>
        <view class="player-info">
          <text class="player-name">{{item.name}}</text>
          <text class="player-chips">{{item.chips}}</text>
          <text class="player-bet" wx:if="{{item.currentBet > 0}}">下注: {{item.currentBet}}</text>
          <view class="player-status">
            <text wx:if="{{item.folded}}" class="status-folded">已弃牌</text>
            <text wx:if="{{item.allIn}}" class="status-allin">全押</text>
            <text wx:if="{{currentPlayerIndex === item.id}}" class="status-turn">行动中</text>
          </view>
        </view>
        <!-- 玩家手牌（仅显示自己的或游戏结束） -->
        <view class="player-cards" wx:if="{{item.id === myPlayerIndex || gamePhase === 'ended'}}">
          <view class="card-item" wx:for="{{item.cards}}" wx:key="index">
            <text class="card-suit">{{item.suit}}</text>
            <text class="card-rank">{{item.rank}}</text>
          </view>
        </view>
      </view>
    </view>
  </block>

  <block wx:else>
    <view class="players-list">
      <view 
        class="player-item {{item.id === myPlayerIndex ? 'me' : ''}} {{currentPlayerIndex === item.id ? 'active' : ''}}"
        wx:for="{{players}}"
        wx:key="id"
        data-index="{{item.id}}"
        bindtap="onPlayerTap"
      >
        <view class="player-avatar">{{item.name.charAt(0)}}</view>
        <view class="player-info">
          <view class="player-name">
            {{item.name}}
            <text wx:if="{{item.id === myPlayerIndex}}" class="me-badge">我</text>
          </view>
          <view class="player-details">
            <text class="player-chips">筹码: {{item.chips}}</text>
            <text class="player-bet" wx:if="{{item.currentBet > 0}}">下注: {{item.currentBet}}</text>
          </view>
          <view class="player-status">
            <text wx:if="{{item.folded}}" class="status-folded">已弃牌</text>
            <text wx:if="{{item.allIn}}" class="status-allin">全押</text>
            <text wx:if="{{currentPlayerIndex === item.id}}" class="status-turn">行动中</text>
          </view>
        </view>
        <!-- 玩家手牌（仅显示自己的或游戏结束） -->
        <view class="player-cards" wx:if="{{item.id === myPlayerIndex || gamePhase === 'ended'}}">
          <view class="card-item" wx:for="{{item.cards}}" wx:key="index">
            <text class="card-suit">{{item.suit}}</text>
            <text class="card-rank">{{item.rank}}</text>
          </view>
        </view>
      </view>
    </view>
  </block>
</view>
