<!--pages/replay/replay.wxml-->
<view class="container">
  <view class="header card">
    <view class="title">å¤ç›˜è®°å½•</view>
    <text class="subtitle">å…± {{gameHistory.length}} æ¡è®°å½•</text>
  </view>

  <view wx:if="{{gameHistory.length === 0}}" class="empty-state">
    <view class="empty-state-icon">ğŸ“Š</view>
    <view class="empty-state-text">æš‚æ— å¤ç›˜è®°å½•</view>
    <view class="empty-state-desc">å¼€å§‹æ¨¡æ‹Ÿç»ƒä¹ åï¼Œè®°å½•ä¼šè‡ªåŠ¨ä¿å­˜</view>
  </view>

  <view wx:else class="history-list">
    <view 
      class="history-item card fade-in" 
      wx:for="{{gameHistory}}" 
      wx:key="id"
      data-index="{{index}}"
      bindtap="viewReplay"
    >
      <view class="item-header">
        <text class="item-time">{{item.timestamp}}</text>
        <text class="item-id">#{{item.id.slice(-6)}}</text>
      </view>
      <view class="item-content">
        <text>ç©å®¶æ•°: {{item.gameState.players.length}}</text>
        <text>åº•æ± : {{item.gameState.pot}}</text>
        <text>é˜¶æ®µ: {{item.gameState.gamePhase || 'preflop'}}</text>
        <text>ç»“æœ: {{item.finalResult ? item.finalResult.message : 'æœªå®Œæˆ'}}</text>
      </view>
      <view class="item-actions">
        <button class="btn btn-primary" size="mini" data-index="{{index}}" bindtap="viewReplay" catchtap="stopPropagation">æŸ¥çœ‹</button>
        <button class="btn btn-danger" size="mini" data-id="{{item.id}}" bindtap="deleteRecord" catchtap="stopPropagation">åˆ é™¤</button>
      </view>
    </view>
  </view>

  <view wx:if="{{gameHistory.length > 0}}" class="footer">
    <button class="btn btn-danger" bindtap="clearAll">æ¸…ç©ºæ‰€æœ‰è®°å½•</button>
  </view>
</view>
