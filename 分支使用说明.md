# 分支使用说明

## 当前分支结构

```
main (生产环境)
  ↑
dev (开发环境)
  ↑
feature/* (功能分支)
fix/* (修复分支)
```

## 已创建的示例分支

- `feature/example-feature` - 功能开发示例分支
- `fix/example-fix` - Bug修复示例分支

**注意**：这些是示例分支，实际开发时应该根据具体任务创建新的分支。

## 如何创建新分支

### 方法一：使用辅助脚本（推荐）

**创建功能分支：**
```bash
# Linux/Mac
./git-helper.sh feature 功能名称

# Windows PowerShell
.\git-helper.ps1 -Type feature -Name 功能名称
```

**创建修复分支：**
```bash
# Linux/Mac
./git-helper.sh fix 问题描述

# Windows PowerShell
.\git-helper.ps1 -Type fix -Name 问题描述
```

### 方法二：手动创建

```bash
# 确保在 dev 分支
git checkout dev
git pull origin dev

# 创建功能分支
git checkout -b feature/功能名称

# 或创建修复分支
git checkout -b fix/问题描述
```

## 实际开发示例

### 示例1：开发用户登录功能

```bash
# 1. 创建分支
./git-helper.sh feature user-login

# 2. 开发功能...
# (编写代码)

# 3. 提交更改
./git-commit.sh
# 输入: 添加用户登录功能
# 实际提交: feat: 添加用户登录功能

# 4. 推送到远程
git push origin feature/user-login

# 5. 合并到 dev
git checkout dev
git merge feature/user-login
git push origin dev
```

### 示例2：修复房间列表加载问题

```bash
# 1. 创建分支
./git-helper.sh fix room-list-loading

# 2. 修复问题...
# (编写代码)

# 3. 提交更改
./git-commit.sh
# 输入: 修复房间列表加载失败
# 实际提交: fix: 修复房间列表加载失败

# 4. 推送到远程
git push origin fix/room-list-loading

# 5. 合并到 dev
git checkout dev
git merge fix/room-list-loading
git push origin dev
```

## 分支命名规范

### Feature 分支
- 格式：`feature/功能名称`
- 使用小写字母和连字符
- 示例：
  - `feature/user-login`
  - `feature/room-chat`
  - `feature/multiplayer-game`

### Fix 分支
- 格式：`fix/问题描述`
- 使用小写字母和连字符
- 示例：
  - `fix/room-list-loading`
  - `fix/socket-connection`
  - `fix/game-state-sync`

## 清理示例分支

如果不需要示例分支，可以删除：

```bash
# 删除本地分支
git branch -d feature/example-feature
git branch -d fix/example-fix

# 如果分支已推送到远程，删除远程分支
git push origin --delete feature/example-feature
git push origin --delete fix/example-fix
```

## 查看所有分支

```bash
# 查看本地分支
git branch

# 查看所有分支（包括远程）
git branch -a

# 查看已合并的分支
git branch --merged

# 查看未合并的分支
git branch --no-merged
```

## 注意事项

1. **feature 和 fix 分支是临时分支**
   - 开发完成后应该合并到 dev 并删除
   - 不要长期保留这些分支

2. **始终从 dev 分支创建新分支**
   - 确保基于最新的代码开发

3. **分支命名要清晰**
   - 使用有意义的名称
   - 遵循命名规范

4. **及时合并和清理**
   - 功能完成后及时合并
   - 合并后删除本地和远程分支
